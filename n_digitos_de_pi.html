<html>
  <head>
    <meta charset="utf-8">
    <title>N dígitos de π</title>
    <link rel="stylesheet" href="estilos.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <py-env>
      - paths:
        - ./pyconlatam2022.py
    </py-env>

    <py-script>

      from pyconlatam2022 import espita, agrupa


      def calcula():
          try:
              n = int(campo_de_captura.value)
          except ValueError:
              n = 3
          resultado = (f'Los primeros {n} dígitos de Pi:\n\n'
            + agrupa(espita(n)))
          Element('seccion_de_resultado').write(resultado)

    </py-script>

  </head>
  <body>

    <h1>
        N dígitos de &pi;
    </h1>

    <p>
        ¿Cuántos dígitos de &pi; quieres calcular?
    </p>

    <py-inputbox id="campo-de-captura" style="font-size: 40px;">

        def on_keypress(event):
            if event.code in ('Enter', 'NumpadEnter'):
                calcula()

    </py-inputbox>

    &nbsp;

    <py-button id="boton-calcular" label="Calcular">

        def on_click(event):
            calcula()

    </py-button>

    <br/>
    <br/>

    <pre id="seccion_de_resultado"></pre>

  </body>
</html>
